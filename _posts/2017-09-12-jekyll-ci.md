---
layout: post
title:  "Continuous Integration!<br>Or: Jekyll gets some robot nannies."
categories: main
date: 2017-09-12
sticky: false
---


I've been making a lot of **Jekyll static sites** lately, and the more work I do, the more it looks like I'll be making many many more. Why? **Because they're quickly proving to be sustainable, extendable, and super powerful.** (For more on the potential of Jekyll, check out [this post](omekyll).)

With more sites to manage and increasingly complex components to maintain, I've shifted my focus to **automating acceptance tests** with [continuous integration](https://www.atlassian.com/continuous-delivery/continuous-integration-intro). In context, this means that every time I make a branch commit to my Jekyll GitHub repository:

####  1. [Gemnasium](#gemnasium) will evaluate my dependencies, <br>2. [Travis-CI](#travis) will build my site from scratch on a virtual machine, <br> 3. [html-proofer](#html-proofer) will crawl the site for errors, and <br> 4. [rspec](), [capybara](), and [poltergeist]() will perform functional unit tests.

In other words, my Jekyll sites are now pampered. If anything emerges as risk to their success, my CI robot nannies will intervene and let me know how to stop it.

I'll talk about the first 3 parts of the process in this post, and add another post for [headless testing with rspec, capybara, and poltergeist](/notes/headless-test-dynamic-search), which is admittedly more difficult but completely worth it.

<center><a href="https://en.wikipedia.org/wiki/Daniel_Mr%C3%B3z"><img src="https://i.pinimg.com/736x/cf/51/2d/cf512d30b3916dd255cec4222269f216--solaris-daniel-oconnell.jpg" style="box-shadow: 2px 2px 4pc #23352a;width:500px;margin-top:50px;"/></a></center>


# Get yer warning badges
<img src="https://gemnasium.com/badges/github.com/mnyrop/mnyrop.github.io.svg"/> <img src="https://travis-ci.org/mnyrop/mnyrop.github.io.svg?branch=master"/>

<h4 id="gemnasium">1. Get a <a href="https://gemnasium.com/users/sign_up">Gemnasium account</a>, and follow the steps to activate Gemnasium on your Jekyll site repository.</h4>

If you have valid dependency lists (in the form of a Gemfile, a package.json file, etc), Gemnasium will read them and give you a [report on the status of your dependencies](https://gemnasium.com/github.com/mnyrop/mnyrop.github.io)—which are outdated, which require security updates, and so on. If you add the badge (like above) to your README.md file, it will let you and anyone else know what might be lagging behind, and will (hopefully) remind you to update and test your site. If you're like me and are *extra* lazy, you can even set up webhooks to notify you via email or Slack. ✓

<h4 id="travis">2. Get a <a href="https://travis-ci.org">Travis-CI account</a> and follow the steps to activate Gemnasium on your Jekyll site repository.</h4>

In addition to activating Travis on your repository, you'll need to add a `.travis.yml` file in the root of the repo to tell Travis what to do. To start, it should include the following:

```yaml
language: ruby
rvm:
  - 2.4
script:
  - bundle exec jekyll build
```

When you commit the `.travis.yml` file (either to the `master` branch or, preferably, to a new `travis` branch), it should trigger a new Travis build that will look something like [this](https://travis-ci.org/mnyrop/mnyrop.github.io/builds/269849238) when complete. (You'll probably want to add your Travis build badge right next to your Gemnasium badge on your README.)

<h1 id="html-proofer">--check-html</h1>

When your dependencies are up to date and your build is giving you the green light, merge all your changes into the `master` branch and clone a working copy of `master` locally.
