<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />

  <title>Actions!!! Automate FTP deploys from GitHub to CPanel</title>
  <meta name="description" content="The process leverages GitHub Actions to build, test, and deploy a compiled Jekyll site to a CPanel account on a shared Reclaim hosting server. With slight mo...">

  
  <link rel="icon" href="/assets/snake.png" />
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="/notes/deploy-from-github-to-cpanel">

  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-F7LL67XEP6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-F7LL67XEP6');
</script>

</head>


  <body>
    <div class="container">
      <div class="post">
        <div class="bio">
  <div class="bio__header">
  	<a href="/"><img src="/assets/snake.png" alt="2 headed snake logo" style="width:100px;"/></a>
  </div>
  <!-- <div class="bio__desc"></div> -->
  <div class="bio__menu">
    
    <a href="/">Home</a>&nbsp;
    
    <a href="/about">About</a>&nbsp;
    
    
      
      <a href="https://twitter.com/mariinyrop" target="_blank">Twitter ⇝</a>&nbsp;
      
      <a href="https://github.com/mnyrop" target="_blank">Github ⇝</a>&nbsp;
      
      <a href="https://open.spotify.com/user/marii_marii" target="_blank">Spotify ⇝</a>
      
    
  </div>
</div>


        <div class="post__meta">
          <div class="post__title">Actions!!! Automate FTP deploys from GitHub to CPanel</div>
          <div class="post__date">
            
              2021
            
          </div>
          <div class="post__cat"></div>
        </div>

        <div class="post__body">
          <img src="https://i.makeagif.com/media/5-21-2015/W4vUS3.gif" class="fullwidth"/>
          <p><strong>The process leverages GitHub Actions to build, test, and deploy a compiled Jekyll site to a CPanel account on a shared Reclaim hosting server.</strong> With slight modification, it should work for any fully-static or statically-generated site and any ol’ server with FTP. Depending on how you build your site, the server shouldn’t need Apache or Nginx since we’ll syncing static files directly to <code class="language-plaintext highlighter-rouge">/public_html</code>.</p>

<h3 id="step-1-create-a-gitgub-a-repository-with-your-site-files">Step 1. <strong>Create a GitGub a repository with your site files</strong></h3>
<p>Feel free to use and remix <a href="https://github.com/nyu-dss/wh-deploilerplate">this template</a>.</p>

<h3 id="step-2-create-an-ftp-deploy-account-on-your-cpanel-account">Step 2. <strong>Create an FTP deploy account on your CPanel account</strong></h3>
<p>Log in to your dashboard and navigate to the “FTP Accounts” tab under “Files.”
<a href="/images/cpanel_ftp.png"><img src="/images/cpanel_ftp.png" alt="ftp dashboard" class="shadow" /></a>
Create a special FTP account just for deployments. Under “directory” put <code class="language-plaintext highlighter-rouge">public_html</code>. If you want the site to be in a subdirectory from the root URL (e.g., “marii.hosting.nyu.edu/my-site”), enter the subdirectory after <code class="language-plaintext highlighter-rouge">public_html</code> with no trailing slash (e.g., <code class="language-plaintext highlighter-rouge">public_html/my-site</code>).
<a href="/images/cpanel_ftp.png"><img src="/images/create_ftp_account.png" alt="create ftp account" class="shadow" /></a>
More info available <a href="https://docs.cpanel.net/cpanel/files/ftp-accounts/">here</a>.</p>

<h3 id="step-3-add-your-ftp-deploy-account-credentials-to-your-github-repo-secrets-settings">Step 3. <strong>Add your FTP deploy account credentials to your GitHub repo secrets settings</strong></h3>
<p>Since our GitHub repo will initiate FTP deployments for us, we need to give it our new credentials. To do so, navigate to your repo &gt; Settings &gt; Secrets. As the page says, “Secrets are environment variables that are encrypted” and made available to Actions workflows. The deployment workflow we’ll define in the next step needs three environment vars: <code class="language-plaintext highlighter-rouge">FTP_SERVER</code>, <code class="language-plaintext highlighter-rouge">FTP_USERNAME</code>, and <code class="language-plaintext highlighter-rouge">FTP_PASSWORD</code>.  These need to be spelled verbatim unless you plan on customizing the action files.</p>

<p>Click “New repository secret” and create the variables one by one using the credentials you made in the last step. Note that <code class="language-plaintext highlighter-rouge">FTP_USERNAME</code> should have the “Log In” name you created, e.g, “my-deployer-name”. The <code class="language-plaintext highlighter-rouge">FTP_SERVER</code> should be the “Host” you entered with no additional file paths or protocols.</p>

<p><a href="/images/secrets_dash.png"><img src="/images/secrets_dash.png" alt="secrets dashboard" class="shadow" /></a></p>

<p>More info available <a href="https://docs.github.com/en/actions/reference/encrypted-secrets">here</a>.</p>

<h3 id="step-4-configure-github-actions-workflow-for-your-repo">Step 4. <strong>Configure GitHub Actions workflow for your repo</strong></h3>

<p>To set up a GitHub actions workflow, you’ll define a set of steps and settings in YAML format and put them in your repo in a special directory <code class="language-plaintext highlighter-rouge">.github/workflows</code>. If you’re using the <a href="https://github.com/nyu-dss/wh-deploilerplate">template</a>, this is already set up.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># build, test, and ftp deploy a jekyll site</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">ci:deploy</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">main</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">deploy</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">env</span><span class="pi">:</span>
      <span class="na">BASEURL</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">fetch-depth</span><span class="pi">:</span> <span class="m">1</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">ruby/setup-ruby@v1</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">bundler-cache</span><span class="pi">:</span> <span class="no">true</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">install</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">gem install bundler &amp;&amp; bundle</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">build</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">bundle exec rake build</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">test</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">bundle exec rake test</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">deploy</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">SamKirkland/FTP-Deploy-Action@4.0.0</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">server</span><span class="pi">:</span> <span class="s">${{secrets.FTP_SERVER}}</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">${{secrets.FTP_USERNAME}}@{{secrets.FTP_SERVER}}</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">${{secrets.FTP_PASSWORD}}</span>
          <span class="na">local-dir</span><span class="pi">:</span> <span class="s">./_site/</span>

</code></pre></div></div>

<p><img src="https://thumbs.gfycat.com/AlarmingVeneratedArgentinehornedfrog-small.gif" alt="deploy gif" /></p>

<p>More info available <a href="https://docs.github.com/en/actions">here</a>.</p>

        </div>

        
          <div class="post__paginate">
            
              <a class="post__paginate-left" href="/notes/ghostscript-for-washed-out-pdfs">Using Ghostscript to Covert Washed-Out PDFs to PNGs for OCR Processing</a>
            

            
          </div>
        
      </div>

      
  <ul class="rows">
    <li class="row__cols">
      <div class="row__title">
        
          Notes
        
      </div>
      <div class="row__date">
        
          Time Period
        
      </div>
      <div class="row__cat">
        
          Tags
        
      </div>
    </li>
    
      <li class="row__post">
        <a href="/notes/deploy-from-github-to-cpanel">
          <div class="row__title row__active">
            Actions!!! Automate FTP deploys from GitHub to CPanel
          </div>
          <div class="row__date row__active">
            2021
          </div>
          <div class="row__cat row__active">
            actions;ci;cpanel;github;
          </div>
        </a>

        
          <img class="row__img" src="https://i.makeagif.com/media/5-21-2015/W4vUS3.gif" alt="Actions!!! Automate FTP deploys from GitHub to CPanel">
        
      </li>
    
      <li class="row__post">
        <a href="/notes/ghostscript-for-washed-out-pdfs">
          <div class="row__title ">
            Using Ghostscript to Covert Washed-Out PDFs to PNGs for OCR Processing
          </div>
          <div class="row__date ">
            2020
          </div>
          <div class="row__cat ">
            ghostscript;ocr;bash
          </div>
        </a>

        
          <img class="row__img" src="/images/ghostscript.gif" alt="Using Ghostscript to Covert Washed-Out PDFs to PNGs for OCR Processing">
        
      </li>
    
      <li class="row__post">
        <a href="/notes/nycdh-2018">
          <div class="row__title ">
            NYCDH Week Workshop: Publishing Sites with GitHub Pages
          </div>
          <div class="row__date ">
            2018
          </div>
          <div class="row__cat ">
            jekyll;workshop;github;dh
          </div>
        </a>

        
          <img class="row__img" src="https://i1.wp.com/blog.rapidapi.com/wp-content/uploads/2017/01/octocat.gif?resize=800%2C500&ssl=1" alt="NYCDH Week Workshop: Publishing Sites with GitHub Pages">
        
      </li>
    
      <li class="row__post">
        <a href="/notes/static-iiif-annotations">
          <div class="row__title ">
            Create and store static IIIF annotations... Minicomp style
          </div>
          <div class="row__date ">
            2018
          </div>
          <div class="row__cat ">
            jekyll;iiif;rake
          </div>
        </a>

        
          <img class="row__img" src="https://darthcrimson.org/wp-content/uploads/2016/10/parser3-1024x568.png" alt="Create and store static IIIF annotations... Minicomp style">
        
      </li>
    
      <li class="row__post">
        <a href="/notes/govt-document-pipeline">
          <div class="row__title ">
            Create a Gov't Document Pipeline from Scraping to Full Text OCR
          </div>
          <div class="row__date ">
            2017
          </div>
          <div class="row__cat ">
            bs4;tesseract;ocr
          </div>
        </a>

        
          <img class="row__img" src="/images/asad.png" alt="Create a Gov't Document Pipeline from Scraping to Full Text OCR">
        
      </li>
    
      <li class="row__post">
        <a href="/notes/headless-test-dynamic-search">
          <div class="row__title ">
            Continuous Integration II: Headless Tests w/ RSpec, Capybara, and Poltergeist
          </div>
          <div class="row__date ">
            2017
          </div>
          <div class="row__cat ">
            ci;rspec;capybara;poltergeist
          </div>
        </a>

        
          <img class="row__img" src="https://i.gifer.com/8Qfd.gif" alt="Continuous Integration II: Headless Tests w/ RSpec, Capybara, and Poltergeist">
        
      </li>
    
      <li class="row__post">
        <a href="/notes/jekyll-ci">
          <div class="row__title ">
            Continuous Integration! Or: Jekyll gets some robot nannies.
          </div>
          <div class="row__date ">
            2017
          </div>
          <div class="row__cat ">
            jekyll;ci
          </div>
        </a>

        
          <img class="row__img" src="https://i.pinimg.com/736x/cf/51/2d/cf512d30b3916dd255cec4222269f216--solaris-daniel-oconnell.jpg" alt="Continuous Integration! Or: Jekyll gets some robot nannies.">
        
      </li>
    
      <li class="row__post">
        <a href="/notes/automate-yr-docs-mysql-to-markown-via-py">
          <div class="row__title ">
            Automate docs for DB updates with Pandas + Markdown
          </div>
          <div class="row__date ">
            2017
          </div>
          <div class="row__cat ">
            documentation;myql;python;markdown
          </div>
        </a>

        
          <img class="row__img" src="https://nsarchive2.gwu.edu/NSAEBB/NSAEBB601-British-appealed-to-US-in-1952-for-coup-against-Mosaddeq-in-Iran/images/1.jpg" alt="Automate docs for DB updates with Pandas + Markdown">
        
      </li>
    
      <li class="row__post">
        <a href="/notes/the-summer-of-puppets-4">
          <div class="row__title ">
            The Summer of Japanese Puppets, Part 4
          </div>
          <div class="row__date ">
            2017
          </div>
          <div class="row__cat ">
            d3js;lunr;jekyll
          </div>
        </a>

        
          <img class="row__img" src="https://www1.columbia.edu/sec-cgi-bin/cul/dlo?obj=ldpd_bun_slide_024_1_0427_0621&size=medium" alt="The Summer of Japanese Puppets, Part 4">
        
      </li>
    
      <li class="row__post">
        <a href="/notes/the-summer-of-puppets-3">
          <div class="row__title ">
            The Summer of Japanese Puppets, Part 3
          </div>
          <div class="row__date ">
            2017
          </div>
          <div class="row__cat ">
            jekyll;github-pages;liquid
          </div>
        </a>

        
          <img class="row__img" src="https://www1.columbia.edu/sec-cgi-bin/cul/dlo?obj=ldpd_bun_slide_677_4_0606_0607&size=medium" alt="The Summer of Japanese Puppets, Part 3">
        
      </li>
    
      <li class="row__post">
        <a href="/notes/the-summer-of-puppets-2">
          <div class="row__title ">
            The Summer of Japanese Puppets, Part 2
          </div>
          <div class="row__date ">
            2017
          </div>
          <div class="row__cat ">
            jupyter;python;json;openrefine
          </div>
        </a>

        
          <img class="row__img" src="https://www.columbia.edu/cgi-bin/dlo?obj=ldpd_bun_slide_493_2_0779_0826&size=medium" alt="The Summer of Japanese Puppets, Part 2">
        
      </li>
    
      <li class="row__post">
        <a href="/notes/the-summer-of-puppets">
          <div class="row__title ">
            The Summer of Japanese Puppets, Part 1
          </div>
          <div class="row__date ">
            2017
          </div>
          <div class="row__cat ">
            sql;jekyll;php
          </div>
        </a>

        
          <img class="row__img" src="https://www.columbia.edu/cgi-bin/dlo?obj=ldpd_bun_slide_362_1_6665_8069&size=medium" alt="The Summer of Japanese Puppets, Part 1">
        
      </li>
    
  </ul>


    </div>
  </body>

</html>
