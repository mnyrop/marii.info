<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />


	<title>Continuous Integration II:<br>Headless Tests for Jekyll with RSpec, Capybara, and Poltergeist · marii</title>


<meta name="description" content="Still from Poltergeist III (1988), director: Gary Sherman.">


<link rel="icon" href="http://localhost:8000/assets/favicon.png">
<link rel="stylesheet" href="http://localhost:8000/assets/core.css">
<link rel="canonical" href="http://localhost:8000/notes/headless-test-dynamic-search">

<script src="https://use.fontawesome.com/884e80fbb8.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106423521-1', 'auto');
  ga('send', 'pageview');

</script>


	</head>

	<body>

		<br/><br/>

<aside class="logo">

	

	<a href="http://localhost:8000/">
		<img src="/assets/snake.png" class="gravatar">
	</a>
	<span class="logo-prompt">Home</span>

</aside>


		<main>
			<article>

	<div class="center">
		<h1>Continuous Integration II:<br>Headless Tests for Jekyll with RSpec, Capybara, and Poltergeist</h1>
		<p>
			
			
			
				<span style="color:#325666">#continuous-integration</span>&nbsp;&nbsp;
			
			
			
				<span style="color:#71909e">#travis</span>&nbsp;&nbsp;
			
			
			
				<span style="color:#325666">#jekyll</span>&nbsp;&nbsp;
			
			
			
				<span style="color:#71909e">#rspec</span>&nbsp;&nbsp;
			
			
			
				<span style="color:#325666">#capybara</span>&nbsp;&nbsp;
			
			
			
				<span style="color:#71909e">#poltergeist</span>&nbsp;&nbsp;
			
			
			
				<span style="color:#325666">#rack</span>&nbsp;&nbsp;
			
			
			
				<span style="color:#71909e">#lunr</span>
			
		</p>
		<time>September 12, 2017</time>
	</div>

	<div class="divider"></div>

	<p><img src="http://bh-s2.azureedge.net/bh-uploads/2016/05/poltergeist-ii-moustache-skeleton.jpg" style="box-shadow: 2px 2px 4pc #23352a;width:100%;margin-bottom:10px;" />
<sup>Still from <strong><em>Poltergeist III</em></strong> (1988), director: Gary Sherman.</sup></p>

<h3 id="what-is-a-headless-feature-test">What is a headless feature test?</h3>

<p>The term “headless” refers to software capable of working without a GUI. Accordingly, <strong>headless feature tests</strong> are programmatic actions that <strong>simulate in-brower user interactions with site features</strong> (without needing to actually open a GUI browser!) <strong>and then return results on the success (or failure)</strong> of that interaction.</p>

<p><strong>In simpler terms:</strong> they’re programs that go test your features for you, and come back bearing some good or not-so-good news.</p>

<p>Headless feature tests (like any <a href="http://searchsoftwarequality.techtarget.com/definition/unit-testing">unit tests</a>) are an important part of any <strong><a href="https://aws.amazon.com/devops/continuous-integration/">Continuous Integration</a> (CI)</strong> architecture. If you’re new to CI and want to figure out how to set up your Jekyll site in a continuously integrated way, check out <a href="jekyll-ci">this other post</a> first. If you’re all set up with CI for Jekyll and want to take it to the next step, this post is for you.</p>

<h3 id="what-tools-do-we-need">What tools do we need?</h3>

<h4 id="travis-ci"><a href="https://travis-ci.org">Travis-CI</a></h4>
<p>“… is a hosted, distributed continuous integration service used to build and test software projects hosted at GitHub,” that basically tests your build and performs any other tasks you specify on a VM in the cloud. For more on Jekyll and Travis, refer back to <a href="jekyll-ci">this post</a>.</p>

<h4 id="rspec"><a href="http://rspec.info/">Rspec</a></h4>
<p>… is a Ruby gem and “spec runner” for <em>behavior-driven development</em>, which is exactly what it sounds like. Rspec lets you write tests for what your code <em>should</em> do, which in turn helps you write better, less fickle code.</p>

<h4 id="rack-jekyll"><a href="https://github.com/adaoraul/rack-jekyll">Rack-Jekyll</a></h4>
<p>… is a Ruby gem and Jekyll plugin that transforms your Jekyll site into a <a href="https://rack.github.io/">Rack</a> application. If you’re not familiar with Rack, all you need to know is that it is the preferred app format for Capybara, so Jekyll-Rack is just translating our Jekyll site to an app that Capybara will get along with better.</p>

<h4 id="capybara"><a href="http://teamcapybara.github.io/capybara/">Capybara</a></h4>
<p>… is a Ruby gem that “helps you test web applications by simulating how a real user would interact with your app.” It’s basically what makes Rspec act like a user.</p>

<h4 id="poltergeist"><a href="https://github.com/teampoltergeist/poltergeist">Poltergeist</a></h4>
<p>… is a Ruby gem and driver for Capybara that allows you to run your tests on a headless WebKit browser provided by PhantomJS. It’s basically what gives Capybara access to your browser in order to go around pretending like a user.</p>

<p><strong>To summarize (very roughly):</strong> You write Rspec tests. Rack-Jekyll will translate your Jekyll site to a Rack app. Capybara, pretending to be a user, will access a headless (non-GUI) browser with the help of Poltergeist, open your Rack-like Jekyll site and, finally, perform your RSpec tests on it. This is a crude depiction, since many of these roles overlap. But you get the picture.</p>

<h1 id="example-testing-your-site-search">Example: testing your site search</h1>

<p>I have <a href="">Lunr</a> search enabled on several of my Jekyll sites and, since Lunr indexing is a little wild and prone to errors, I’ve make a headless test for my search feature.</p>

<p>This headless test needs to:<br />
<strong>1. visit pages that have a unique search index,<br />2. confirm that the pages have search bars,<br />3. confirm that terms theoretically present in the index actually yield results when searched,<br />4. confirm that the results link to existing internal pages, and<br />5. confirm that the terms expected are indeed present on those pages.</strong></p>

<p>The following will show you step-by-step how to configure and write such a test.</p>

<h3 id="part-1--rspec-configuration">part 1 – rspec configuration</h3>

<div class="highlighter-rouge">
  <pre class="highlight"><code>
  <span class="s" style="color:black">. </span><span style="color:#666"># site root</span>
  <span class="s" style="color:black">├── _includes</span>
  <span class="s" style="color:black">├── _layouts</span>
  <span class="s" style="color:black">├── _posts</span>
  <span class="s" style="color:black">├── _site</span>
  <span class="s" style="color:black">├── <span style="color:#019129">spec</span></span>
  <span class="s" style="color:black">│   ├── <span style="color:#019129">spec_helper.rb</span></span>
  <span class="s" style="color:black">│   └── <span style="color:#019129">lunr_spec.rb</span></span>
  <span class="s" style="color:black">└── <span style="color:#927f01">_config.yml</span></span>
  <span class="s" style="color:black">└── <span style="color:#019129">.rspec</span></span>
  <span class="s" style="color:black">└── <span style="color:#927f01">.travis.yml</span></span>
  <span class="s" style="color:black">└── <span style="color:#927f01">Gemfile</span></span>
  <span class="s" style="color:black">└── index.md</span>
  </code></pre>
</div>
<p><span style="display:none">__</span></p>

<p>Add a <code class="highlighter-rouge">spec</code> directory to the root of your site, and create <code class="highlighter-rouge">spec_helper.rb</code> and <code class="highlighter-rouge">lunr_spec.rb</code> inside it. You’ll leave these empty for now and come back to them later.</p>

<h4 id="rspec-1">.rspec:</h4>

<p>Next add an <code class="highlighter-rouge">.rspec</code> file to the root of your site and give it the following information:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--require spec_helper
--color
--format documentation
</code></pre></div></div>

<h4 id="gemfile">Gemfile:</h4>

<p>Add <code class="highlighter-rouge">rspec</code>, <code class="highlighter-rouge">capybara</code>, <code class="highlighter-rouge">poltergeist</code>, and <code class="highlighter-rouge">rack-jekyll</code> to the dev/test group of your <code class="highlighter-rouge">Gemfile</code>:</p>

<div>
  <pre><code>
  <span class="s">source "https://rubygems.org"</span>
  <span class="s">gem "jekyll", "3.5.2"</span>

  <span class="s">group :development, :test do</span>
    <span class="s">gem 'html-proofer'</span>
    <span class="s" style="color:#019129">gem "rspec"</span>
    <span class="s" style="color:#019129">gem 'capybara'</span>
    <span class="s" style="color:#019129">gem 'poltergeist'</span>
    <span class="s" style="color:#019129">gem "rack-jekyll"</span>
  <span class="s">end</span>
  </code></pre>
</div>

<h4 id="travisyml">.travis.yml:</h4>

<p>Add <code class="highlighter-rouge">bundle exec rspec</code> test to the <code class="highlighter-rouge">script</code> group of your <code class="highlighter-rouge">.travis.yml</code> file:</p>

<div>
  <pre><code>
  <span class="s">language: ruby</span>
  <span class="s">rvm:</span>
    <span class="s">- 2.4</span>
  <span class="s">script:</span>
    <span class="s">- bundle exec jekyll build</span>
    <span class="s">- bundle exec htmlproofer ./_site --only-4xx --check-html --assume-extension</span>
      <span class="s">- NOKOGIRI_USE_SYSTEM_LIBRARIES=true</span>
    <span class="s" style="color:#019129">- bundle exec rspec</span>
  </code></pre>
</div>
<p><span style="display:none">_</span></p>

<p>Then execute <code class="highlighter-rouge">$ bundle</code> or <code class="highlighter-rouge">$ bundle install</code> to load the gems and update your <code class="highlighter-rouge">Gemfile.lock</code>.</p>

<p><img src="http://www.elotrocine.cl/wp-content/uploads/2015/06/poltergeist1982b.jpg" style="box-shadow: 2px 2px 4pc #23352a;width:100%;margin-top:40px;margin-bottom:10px;" />
<sup>Another amazing and gratuitous still, this time from the first <strong><em>Poltergeist</em></strong> (1982), director: Tobe Hooper.</sup></p>

<h3 id="part-2--set-up-for-your-search-spec">part 2 – set up for your search spec</h3>

<p><strong>{ Note:</strong> This example test assumes that you have search enabled on your Jekyll site, presumably with <a href="http://lunrjs.com">Lunr</a> client-side search. I won’t get into indexing your site with Lunr here (that will have to wait for another post), but if you have a working search bar with <code class="highlighter-rouge">id="search"</code>, and it dynamically generates html results with <code class="highlighter-rouge">class="results"</code>, this spec should work for you. For sample jQuery for dynamically showing search results, check out <a href="https://gist.github.com/mnyrop/a0a8834e29a3d3ed403242660719f87b">this gist</a>. <strong>}</strong></p>

<h4 id="_configyml_">_config.yml:<span style="display:none">_</span></h4>

<p>For our search spec specifically, you’ll need to tell your <code class="highlighter-rouge">_config.yml</code> which pages have (unique) search bars/indexes and which terms you want to test on each of those pages.</p>

<p>In my example site, I have a full site search on <code class="highlighter-rouge">search .html</code> (which should yield results for <code class="highlighter-rouge">headless</code>, and <code class="highlighter-rouge">rack-jekyll</code>), and a tag-specific search on <code class="highlighter-rouge">tags.html</code> (which should yield results for <code class="highlighter-rouge">travis</code> and <code class="highlighter-rouge">poltergeist</code>).</p>

<p>You can specify as many pages and terms as you want, as long as you use the following structure with <code class="highlighter-rouge">search_tests</code>, a name, a <code class="highlighter-rouge">page</code>, and an array of <code class="highlighter-rouge">terms</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># rspec test settings
search_tests:
  main:
    page: search.html
    terms:
      - headless
      - rack-jekyll
  tags:
    page: tags.html
    terms:
      - travis
      - poltergeist
</code></pre></div></div>

<center><img src="http://www.claudinho.com.br/wp-content/uploads/2015/12/capivara-sem-fundo.png" style="width:70%;margin-top:40px;margin-bottom:10px;" />
<br /><sup>An altogether unjustifiable image of a <a href="https://en.wikipedia.org/wiki/Capybara_(software)">Capybara</a>.</sup></center>

<h3 id="part-3--write-a-helper-spec">part 3 – write a helper spec</h3>

<h4 id="spec_helperrb">spec_helper.rb:</h4>

<p>Add the following to the <code class="highlighter-rouge">spec_helper.rb</code> file in your <code class="highlighter-rouge">spec</code> directory:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># get necessary gems</span>
<span class="nb">require</span> <span class="s1">'rspec'</span>
<span class="nb">require</span> <span class="s1">'capybara/poltergeist'</span>
<span class="nb">require</span> <span class="s1">'capybara/dsl'</span>
<span class="nb">require</span> <span class="s1">'rack/jekyll'</span>
<span class="nb">require</span> <span class="s1">'rack/test'</span>

<span class="no">RSpec</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">include</span> <span class="no">Capybara</span><span class="o">::</span><span class="no">DSL</span>

  <span class="c1"># get config info</span>
  <span class="vg">$jekyll_config</span> <span class="o">=</span> <span class="no">YAML</span><span class="p">.</span><span class="nf">load_file</span><span class="p">(</span><span class="s1">'_config.yml'</span><span class="p">)</span>
  <span class="vg">$baseurl</span> <span class="o">=</span> <span class="vg">$jekyll_config</span><span class="p">[</span><span class="s1">'baseurl'</span><span class="p">].</span><span class="nf">to_s</span>
  <span class="vg">$search_tests</span> <span class="o">=</span> <span class="vg">$jekyll_config</span><span class="p">[</span><span class="s1">'search_tests'</span><span class="p">]</span>

  <span class="c1"># set up capybara and register the jekyll site via rack</span>
  <span class="no">Capybara</span><span class="p">.</span><span class="nf">current_driver</span> <span class="o">=</span> <span class="ss">:poltergeist</span>
  <span class="no">Capybara</span><span class="p">.</span><span class="nf">javascript_driver</span> <span class="o">=</span> <span class="ss">:poltergeist</span>
  <span class="no">Capybara</span><span class="p">.</span><span class="nf">app</span> <span class="o">=</span> <span class="no">Rack</span><span class="o">::</span><span class="no">Jekyll</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:force_build</span> <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This will: hand your spec test the necessary gems, tell RSpec to use Capybara, tell Capybara to use Poltergeist, and tell rack-jekyll to register the Jekyll site. It will also read in your <code class="highlighter-rouge">baseurl</code> and <code class="highlighter-rouge">search_tests</code> info from your <code class="highlighter-rouge">_config.yml</code>, in order to correctly visit your pages and test the queries that you expect.</p>

<h3 id="part-4--write-a-test-spec">part 4 – write a test spec</h3>

<h4 id="lunr_specrb">lunr_spec.rb:</h4>

<p>Add the following to the <code class="highlighter-rouge">lunr_spec.rb</code> file in your <code class="highlighter-rouge">spec</code> directory:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vg">$search_tests</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">search</span><span class="o">|</span> <span class="c1"># for each search type listed, e.g. "main" and "tags"</span>
  <span class="n">search_page</span> <span class="o">=</span> <span class="n">search</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">'page'</span><span class="p">]</span> <span class="c1"># get page</span>
  <span class="n">terms</span> <span class="o">=</span> <span class="n">search</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">'terms'</span><span class="p">]</span> <span class="c1"># get array of terms</span>

  <span class="n">describe</span> <span class="n">search_page</span><span class="p">,</span> <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:feature</span><span class="p">,</span> <span class="ss">:js</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="k">do</span>
    <span class="n">before</span><span class="p">(</span><span class="ss">:all</span><span class="p">)</span> <span class="k">do</span>
      <span class="n">visit</span><span class="p">(</span><span class="vg">$baseurl</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="n">search_page</span><span class="p">)</span> <span class="c1"># go to the search page</span>
      <span class="vi">@search_bar</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="ss">:css</span><span class="p">,</span> <span class="s2">"#search"</span><span class="p">)</span> <span class="c1"># identify the search bar</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s2">"has a search bar."</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="vi">@search_bar</span><span class="p">)</span> <span class="c1"># confirm existence of search bar</span>
    <span class="k">end</span>
    <span class="n">terms</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">term</span><span class="o">|</span> <span class="c1"># for each term</span>
      <span class="n">context</span> <span class="s2">"when searching the term </span><span class="se">\"</span><span class="s2">"</span> <span class="o">+</span> <span class="n">term</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">"</span> <span class="k">do</span>
        <span class="n">before</span><span class="p">(</span><span class="ss">:all</span><span class="p">)</span> <span class="k">do</span>
          <span class="vi">@search_bar</span><span class="p">.</span><span class="nf">set</span> <span class="n">term</span> <span class="c1"># input the term in the search bar</span>
          <span class="vi">@result_link</span> <span class="o">=</span> <span class="n">first</span><span class="p">(</span><span class="s2">".result"</span><span class="p">).</span><span class="nf">first</span><span class="p">(</span><span class="s2">"a"</span><span class="p">)[</span><span class="s1">'href'</span><span class="p">]</span> <span class="c1"># get the first result's first link</span>
        <span class="k">end</span>
        <span class="n">after</span><span class="p">(</span><span class="ss">:all</span><span class="p">)</span> <span class="k">do</span>
          <span class="n">visit</span><span class="p">(</span><span class="vg">$baseurl</span> <span class="o">+</span> <span class="s2">"/"</span> <span class="o">+</span> <span class="n">search_page</span><span class="p">)</span> <span class="c1"># after searching a term, start back at main search page</span>
        <span class="k">end</span>
        <span class="n">it</span> <span class="s2">"yields at least 1 result"</span> <span class="k">do</span>
          <span class="n">expect</span><span class="p">(</span><span class="vi">@result_link</span><span class="p">)</span> <span class="c1"># confirm at least 1 result with link</span>
        <span class="k">end</span>
        <span class="n">it</span> <span class="s2">"which sucessfully links to an existing page"</span> <span class="k">do</span>
          <span class="n">visit</span><span class="p">(</span><span class="vi">@result_link</span><span class="p">)</span> <span class="c1"># go to linked result</span>
          <span class="n">expect</span><span class="p">(</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="c1"># confirm page exists (no 404 error, etc.)</span>
        <span class="k">end</span>
        <span class="n">it</span> <span class="s2">"which totally includes </span><span class="se">\"</span><span class="s2">"</span> <span class="o">+</span> <span class="n">term</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">"</span> <span class="k">do</span>
          <span class="n">expect</span><span class="p">(</span><span class="n">have_text</span><span class="p">(</span><span class="n">term</span><span class="p">))</span> <span class="c1"># confirm result page includes the term in its body text</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>There are several types of “blocks” in Rspec tests including, primarily, <code class="highlighter-rouge">describe</code>, <code class="highlighter-rouge">context</code>, and <code class="highlighter-rouge">it ... do</code>. <code class="highlighter-rouge">describe</code> gives information about the test, <code class="highlighter-rouge">context</code> separates types of actions for the test, and <code class="highlighter-rouge">it ... do</code> blocks contain the actions and expectations themselves. Rspec tests should follow the format of…</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>something
  in one context
    does one thing
  in another context
    does another thing
</code></pre></div></div>

<p>… and should be very readable. For more information on formatting RSpec tests, I recommend exploring the documentation on  <a href="https://relishapp.com/rspec/rspec-core/v/3-6/docs/example-groups/basic-structure-describe-it">Relish</a>.</p>

<h3 id="results">results</h3>

<p>When you run your Rspec test (either locally with <code class="highlighter-rouge">$ bundle exec rspec</code>) or via Git commit with Travis, you should see results logged that resemble the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bundle <span class="nb">exec </span>rspec

search.html
  has a search bar.
  when searching the term <span class="s2">"headless"</span>
    yields at least 1 result
    which sucessfully links to an existing page
    which totally includes <span class="s2">"headless"</span>
  when searching the term <span class="s2">"rack-jekyll"</span>
    yields at least 1 result
    which sucessfully links to an existing page
    which totally includes <span class="s2">"rack-jekyll"</span>
tags.html
  has a search bar.
  when searching the term <span class="s2">"travis"</span>
    yields at least 1 result
    which sucessfully links to an existing page
    which totally includes <span class="s2">"travis"</span>
  when searching the term <span class="s2">"poltergeist"</span>
    yields at least 1 result
    which sucessfully links to an existing page
    which totally includes <span class="s2">"poltergeist

10 examples, 0 failures
</span></code></pre></div></div>

<p>If there are red lines and failed examples, it’s time to troubleshoot and refactor until you see nothing but that sweet green. Either way, your headless test is now doing its job: simulating the actions of a user and warning you about issues in your code.</p>


</article>

<div class="page-navigation">
	
    <a class="next" href="http://localhost:8000/notes/jekyll-ci" title="NEXT: Continuous Integration!<br>Or: Jekyll gets some robot nannies.">&lt;&lt;</a>
		<span> &middot; </span>
  
		<a class="home" href="http://localhost:8000/" title="Back to Homepage">Home</a>
  
		<span> &middot; </span>
    <a class="prev" href="http://localhost:8000/notes/the-summer-of-puppets-4" title="PREV: The Summer of Japanese Puppets, Part 4">&gt;&gt;</a>
  
</div>

		</main>

		<div class="footer">
  <br><br><br><br>
  <button>
    <a href="https://twitter.com/mariinyrop" target="_none">
      <i class="fa fa-lg fa-twitter" aria-hidden="true"></i>
    </a>
  </button>
  &nbsp;&nbsp;
  <button>
    <a href="https://github.com/mnyrop" target="_none">
      <i class="fa fa-lg fa-code-fork" aria-hidden="true"></i>
    </a>
  </button>
  &nbsp;&nbsp;
  <button id="btn" data-clipboard-text="m.nyrop@columbia.edu">
    <i class="fa fa-lg fa-envelope-o" aria-hidden="true"></i>
  </button>
  &nbsp;&nbsp;
  <button>
    <a href="https://stackoverflow.com/users/8227741/marii" target="_none">
      <i class="fa fa-lg fa-stack-overflow" aria-hidden="true"></i>
    </a>
  </button>
  &nbsp;&nbsp;
  <button>
    <a href="https://jsfiddle.net/user/marii_/fiddles/" target="_none">
      <i class="fa fa-lg fa-jsfiddle" aria-hidden="true"></i>
    </a>
  </button>
  &nbsp;&nbsp;
  <button>
    <a href="https://rubygems.org/profiles/marii" target="_none">
      <i class="fa fa-lg fa-diamond" aria-hidden="true"></i>
    </a>
  </button>
  &nbsp;&nbsp;
  <!-- <button>
    <a href="/shelf">
      <i class="fa fa-lg fa-book" aria-hidden="true"></i>
    </a>
  </button> -->
  <br><br>
  <br><br><br>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.10/clipboard.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<style>
  .tooltip{position:absolute;z-index:1030;display:block;font-size:12px;line-height:1.4;opacity:0;filter:alpha(opacity=0);visibility:visible}.tooltip.in{opacity:.9;filter:alpha(opacity=90)}.tooltip.top{padding:5px 0;margin-top:-3px}.tooltip.right{padding:0 5px;margin-left:3px}.tooltip.bottom{padding:5px 0;margin-top:3px}.tooltip.left{padding:0 5px;margin-left:-3px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;text-decoration:none;background-color:#000;border-radius:4px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-top-color:#000;border-width:5px 5px 0}.tooltip.top-left .tooltip-arrow{bottom:0;left:5px;border-top-color:#000;border-width:5px 5px 0}.tooltip.top-right .tooltip-arrow{right:5px;bottom:0;border-top-color:#000;border-width:5px 5px 0}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-right-color:#000;border-width:5px 5px 5px 0}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-left-color:#000;border-width:5px 0 5px 5px}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-bottom-color:#000;border-width:0 5px 5px}.tooltip.bottom-left .tooltip-arrow{top:0;left:5px;border-bottom-color:#000;border-width:0 5px 5px}.tooltip.bottom-right .tooltip-arrow{top:0;right:5px;border-bottom-color:#000;border-width:0 5px 5px}
</style>
<script>
  $('#btn').tooltip({
    trigger: 'click',
    placement: 'bottom'
  });
  function setTooltip(message) {
    $('#btn').tooltip('hide')
      .attr('data-original-title', message)
      .tooltip('show');
  }
  function hideTooltip() {
    setTimeout(function() {
      $('button').tooltip('hide');
    }, 1000);
  }
  // Clipboard
  var clipboard = new Clipboard('button');
  clipboard.on('success', function(e) {
    setTooltip('Copied to clipboard!');
    hideTooltip();
  });
  clipboard.on('error', function(e) {
    setTooltip('Failed!');
    hideTooltip();
  });
</script>


	</body>

</html>
