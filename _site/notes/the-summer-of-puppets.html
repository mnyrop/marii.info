<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />


	<title>The Summer of Japanese Puppets, Part 1 · marii</title>


<meta name="description" content="">


<link rel="icon" href="http://localhost:8000/assets/favicon.png">
<link rel="stylesheet" href="http://localhost:8000/assets/core.css">
<link rel="canonical" href="http://localhost:8000/notes/the-summer-of-puppets">

<script src="https://use.fontawesome.com/884e80fbb8.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106423521-1', 'auto');
  ga('send', 'pageview');

</script>


	</head>

	<body>

		<br/><br/>

<aside class="logo">

	

	<a href="http://localhost:8000/">
		<img src="/assets/snake.png" class="gravatar">
	</a>
	<span class="logo-prompt">Home</span>

</aside>


		<main>
			<article>

	<div class="center">
		<h1>The Summer of Japanese Puppets, Part 1</h1>
		<p>
			
			
			
				<span style="color:#325666">#sql</span>&nbsp;&nbsp;
			
			
			
				<span style="color:#71909e">#jekyll</span>&nbsp;&nbsp;
			
			
			
				<span style="color:#325666">#php</span>
			
		</p>
		<time>July 11, 2017</time>
	</div>

	<div class="divider"></div>

	<p><br />
<img src="http://www.columbia.edu/cgi-bin/dlo?obj=ldpd_bun_slide_362_1_6665_8069&amp;size=medium" style="box-shadow: 2px 2px 4pc #23352a;" />
<br /><br /></p>

<p>This post is part 1 of 4 in a series. Feel free to skip around to:<br /><br /><strong><a href="http://localhost:8000/notes/the-summer-of-puppets-2">part 2: data transformation</a></strong>,<br /><strong><a href="http://localhost:8000/notes/the-summer-of-puppets-3">part 3: the site</a></strong>, or<br /><strong><a href="http://localhost:8000/notes/the-summer-of-puppets-4">part 4: epilogue</a></strong>.</p>

<hr />

<h1 id="enter-bunraku">Enter: Bunraku</h1>

<p>A few months ago, I was given access to a MySQL database with 27 tables of data on <em><a href="https://en.wikipedia.org/wiki/Bunraku">Bunraku</a></em>, or Japanese puppet theater. The data consists primarily of digitized images from the Barbara Curtis Adachi Bunraku Collection here at <a href="http://library.columbia.edu">Columbia University Libraries</a>, but it also contains a ton of relational data on the Bunraku community as Barbara encountered it—which is to say, as a rich network of performers, plays, productions, puppets, craftsmen, narrators, musicians, authors, theaters, instruments, old friends, and even older tales. To be more specific, the data models the complex interrelations of…</p>

<ul>
  <li>123 <strong>authors</strong>,<br /></li>
  <li>2,107 <strong>characters</strong>,<br /></li>
  <li>21,268 <strong>images</strong>,<br /></li>
  <li>129 <strong>kashira</strong> (puppets),<br /></li>
  <li>931 <strong>performances</strong>,<br /></li>
  <li>184 <strong>performers</strong>,<br /></li>
  <li>178 <strong>plays</strong>,<br /></li>
  <li>293 <strong>productions</strong>,<br /></li>
  <li>2,609 <strong>scenes</strong>, and <br /></li>
  <li>76 <strong>image subject tags</strong></li>
</ul>

<p>… spanning decades of Barbara’s involvement with the leading Bunraku troupes in Japan. [Aside: <a href="http://www.sfgate.com/bayarea/article/Barbara-Curtis-Adachi-puppet-theater-expert-2822735.php">Want to learn more about Barbara?</a>]</p>

<p><br /><br />
<img src="http://www.columbia.edu/cgi-bin/dlo?obj=ldpd_bun_slide_382_1_7021_8470&amp;size=medium" style="box-shadow: 2px 2px 4pc #23352a;" />
<br /><br /></p>

<h1 id="act-1-the-task">Act 1: The Task</h1>

<p>Both the MySQL database and the PHP site it powers have been slated for retirement this summer, so my task has been to create a modern, sustainable, and <a href="https://en.wikipedia.org/wiki/Web_template_system#Static_page_generators">static</a> replacement. This replacement needs to handle each of the ten main data object types and their associations—connecting authors to the plays they’d written, connecting those plays to their respective performances (via productions), connecting performers to those performances, and so on in a semi-hierarchical and sprawling fashion. It also needs to approximate the advanced search capabilities of the current site, add new navigational entry points and paths, and accommodate the sometimes enormous number of images associated with a given play or other type of object.</p>

<p>Sounds a bit tedious but simple enough. Yet the project necessitated tackling several difficult (or at least new) questions, namely:</p>

<ol>
  <li>
    <p>How can the data be modeled and converted into static, browser-friendly formats?</p>
  </li>
  <li>
    <p>How should the site relate to that data? (i.e. should all the pages be pre-built from the data, or should the browser do the relational heavy-lifting?)</p>
  </li>
  <li>
    <p>How will search be implemented without the use of a database (or any communication with the server)?</p>
  </li>
  <li>
    <p>How will the site deal with pages that include upwards of 1500 images?</p>
  </li>
  <li>
    <p>How can I create visualizations of the data, and recast them as functional navigational tools to the user?</p>
  </li>
  <li>
    <p>Is it possible to make the site lightweight-enough to run smoothly on less-than-stellar connections? …on mobile?</p>
  </li>
  <li>
    <p>Can I implement advanced English/Japanese search? With both roman and kanji characters?</p>
  </li>
</ol>

<p><br /></p>
<h3 id="next--part-2-data-transformation"><span style="font-weight:400">Next &gt;&gt; </span><a href="http://localhost:8000/notes/the-summer-of-puppets-2">part 2: data transformation</a></h3>
<p><br /><br /></p>


</article>

<div class="page-navigation">
	
    <a class="next" href="http://localhost:8000/notes/the-summer-of-puppets-2" title="NEXT: The Summer of Japanese Puppets, Part 2">&lt;&lt;</a>
		<span> &middot; </span>
  
		<a class="home" href="http://localhost:8000/" title="Back to Homepage">Home</a>
  
		<span> &middot; </span>
    <a class="prev" href="http://localhost:8000/notes/omekyll" title="PREV: Towards an 'Omekyll':<br>Or, what <i>can't</i> Jekyll do?">&gt;&gt;</a>
  
</div>

		</main>

		<div class="footer">
  <br><br><br><br>
  <button>
    <a href="https://twitter.com/mariinyrop" target="_none">
      <i class="fa fa-lg fa-twitter" aria-hidden="true"></i>
    </a>
  </button>
  &nbsp;&nbsp;
  <button>
    <a href="https://github.com/mnyrop" target="_none">
      <i class="fa fa-lg fa-code-fork" aria-hidden="true"></i>
    </a>
  </button>
  &nbsp;&nbsp;
  <button id="btn" data-clipboard-text="m.nyrop@columbia.edu">
    <i class="fa fa-lg fa-envelope-o" aria-hidden="true"></i>
  </button>
  &nbsp;&nbsp;
  <button>
    <a href="https://stackoverflow.com/users/8227741/marii" target="_none">
      <i class="fa fa-lg fa-stack-overflow" aria-hidden="true"></i>
    </a>
  </button>
  &nbsp;&nbsp;
  <button>
    <a href="https://jsfiddle.net/user/marii_/fiddles/" target="_none">
      <i class="fa fa-lg fa-jsfiddle" aria-hidden="true"></i>
    </a>
  </button>
  &nbsp;&nbsp;
  <button>
    <a href="https://rubygems.org/profiles/marii" target="_none">
      <i class="fa fa-lg fa-diamond" aria-hidden="true"></i>
    </a>
  </button>
  &nbsp;&nbsp;
  <!-- <button>
    <a href="/shelf">
      <i class="fa fa-lg fa-book" aria-hidden="true"></i>
    </a>
  </button> -->
  <br><br>
  <br><br><br>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.10/clipboard.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<style>
  .tooltip{position:absolute;z-index:1030;display:block;font-size:12px;line-height:1.4;opacity:0;filter:alpha(opacity=0);visibility:visible}.tooltip.in{opacity:.9;filter:alpha(opacity=90)}.tooltip.top{padding:5px 0;margin-top:-3px}.tooltip.right{padding:0 5px;margin-left:3px}.tooltip.bottom{padding:5px 0;margin-top:3px}.tooltip.left{padding:0 5px;margin-left:-3px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;text-decoration:none;background-color:#000;border-radius:4px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-top-color:#000;border-width:5px 5px 0}.tooltip.top-left .tooltip-arrow{bottom:0;left:5px;border-top-color:#000;border-width:5px 5px 0}.tooltip.top-right .tooltip-arrow{right:5px;bottom:0;border-top-color:#000;border-width:5px 5px 0}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-right-color:#000;border-width:5px 5px 5px 0}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-left-color:#000;border-width:5px 0 5px 5px}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-bottom-color:#000;border-width:0 5px 5px}.tooltip.bottom-left .tooltip-arrow{top:0;left:5px;border-bottom-color:#000;border-width:0 5px 5px}.tooltip.bottom-right .tooltip-arrow{top:0;right:5px;border-bottom-color:#000;border-width:0 5px 5px}
</style>
<script>
  $('#btn').tooltip({
    trigger: 'click',
    placement: 'bottom'
  });
  function setTooltip(message) {
    $('#btn').tooltip('hide')
      .attr('data-original-title', message)
      .tooltip('show');
  }
  function hideTooltip() {
    setTimeout(function() {
      $('button').tooltip('hide');
    }, 1000);
  }
  // Clipboard
  var clipboard = new Clipboard('button');
  clipboard.on('success', function(e) {
    setTooltip('Copied to clipboard!');
    hideTooltip();
  });
  clipboard.on('error', function(e) {
    setTooltip('Failed!');
    hideTooltip();
  });
</script>


	</body>

</html>
